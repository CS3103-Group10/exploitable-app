-- Drop stagnant tables
DROP TABLE IF EXISTS Users CASCADE;
DROP TABLE IF EXISTS Products CASCADE;
DROP TABLE IF EXISTS Inventory CASCADE;

-- Create account for api server to access
CREATE USER api WITH PASSWORD 'password';
ALTER USER api WITH SUPERUSER;

-- Initialize all tables
CREATE TABLE Users (
    uusername       VARCHAR(30) UNIQUE,
    upassword       VARCHAR(32) NOT NULL,
    ucredits        INT NOT NULL DEFAULT 0,
    uid             INT GENERATED ALWAYS AS IDENTITY,
    PRIMARY KEY (uid)
);

CREATE TABLE Products (
    pid      INT GENERATED ALWAYS AS IDENTITY,
	pname    VARCHAR(50) NOT NULL,
    pcost    INT NOT NULL,
	PRIMARY KEY (pid)
);

CREATE TABLE Inventory (
    uid         INT,
    pid         INT,
    FOREIGN KEY (uid) REFERENCES Users(uid) ON DELETE CASCADE,
    FOREIGN KEY (pid) REFERENCES Products(pid) ON DELETE CASCADE
);

-- Initialize dummy data
-- Users
insert into Users (uusername, upassword, ucredits) values ('kfeldheim0', 'DQn9Qp', 10);
insert into Users (uusername, upassword, ucredits) values ('mcofax1', 'y53kYQsSHgh', 32);
insert into Users (uusername, upassword, ucredits) values ('dferrand2', 'qQgeEe9I6D', 21);
insert into Users (uusername, upassword, ucredits) values ('gchittleburgh3', 'GbdKKbCB', 47);
insert into Users (uusername, upassword, ucredits) values ('dlarderot4', 'wHoNz5', 15);
insert into Users (uusername, upassword, ucredits) values ('bphilimore5', 'xHfqDWmFh', 5);
insert into Users (uusername, upassword, ucredits) values ('lmurrie6', 'Y1gC9GK', 13);
insert into Users (uusername, upassword, ucredits) values ('sdavidsson7', 'A28lU41Jdh', 49);
insert into Users (uusername, upassword, ucredits) values ('cdonnelly8', 'cFLNCeHIJ3M', 37);
insert into Users (uusername, upassword, ucredits) values ('fbyard9', '1MX9KcqTR3', 37);
insert into Users (uusername, upassword, ucredits) values ('bdestoopa', 'CKvURkQY2CC', 6);
insert into Users (uusername, upassword, ucredits) values ('gdrissellb', 'irxCRAp1m', 17);
insert into Users (uusername, upassword, ucredits) values ('ltroyc', 'AMAsvAsdfK7', 48);
insert into Users (uusername, upassword, ucredits) values ('bputlandd', 'orNKz0jR', 23);
insert into Users (uusername, upassword, ucredits) values ('lwoodburne', 'qnfFfdsafn', 5);
insert into Users (uusername, upassword, ucredits) values ('kjolliffef', 'wUdQCJjJxJe9', 37);
insert into Users (uusername, upassword, ucredits) values ('jpenningsg', 'Mpe2fpsn', 16);
insert into Users (uusername, upassword, ucredits) values ('smazzeoh', 'SMTflYI9', 28);
insert into Users (uusername, upassword, ucredits) values ('sjacquemyi', 'en0skcGXV8D', 7);
insert into Users (uusername, upassword, ucredits) values ('srisingj', 'LMEt27bJmd5I', 1);
insert into Users (uusername, upassword, ucredits) values ('blarcherk', 'jNg1sC51q', 10);
insert into Users (uusername, upassword, ucredits) values ('csextenl', 'K6NDht0', 28);
insert into Users (uusername, upassword, ucredits) values ('cetterym', 'iFFa32Fge6', 30);
insert into Users (uusername, upassword, ucredits) values ('tforstn', 'E4dt7xYI', 30);
insert into Users (uusername, upassword, ucredits) values ('cswalteridgeo', 'ax2n0VK79GmG', 6);
insert into Users (uusername, upassword, ucredits) values ('csomerscalesp', 'CAU0pwTUaZ', 6);
insert into Users (uusername, upassword, ucredits) values ('hhustlerq', 'lrgwPE3r5g', 16);
insert into Users (uusername, upassword, ucredits) values ('dtroaker', '2Orc4HCCmo7x', 38);
insert into Users (uusername, upassword, ucredits) values ('rmethams', 'xrclsZUpEmky', 21);
insert into Users (uusername, upassword, ucredits) values ('jhaight', 'gXm6MXTWnejz', 31);

-- Products
insert into Products (pname, pcost) values ('Grave Door', 58);
insert into Products (pname, pcost) values ('Equinox Seal', 1);
insert into Products (pname, pcost) values ('Metamorphosis Stone', 98);
insert into Products (pname, pcost) values ('Twilight Cylinder', 108);
insert into Products (pname, pcost) values ('Extinction Mirror', 150);
insert into Products (pname, pcost) values ('Shard of Paralysis', 30);
insert into Products (pname, pcost) values ('Cylinder of Riddles', 113);
insert into Products (pname, pcost) values ('Grimoire of Sentience', 79);
insert into Products (pname, pcost) values ('Fruit of Malice', 64);
insert into Products (pname, pcost) values ('Bracelet of Death', 65);
insert into Products (pname, pcost) values ('Almighty Band', 15);
insert into Products (pname, pcost) values ('Vice Mask', 147);
insert into Products (pname, pcost) values ('Eternal Sword', 148);
insert into Products (pname, pcost) values ('Dominion Lamp', 40);
insert into Products (pname, pcost) values ('Necklace of Revival', 36);
insert into Products (pname, pcost) values ('Jar of Pain', 96);
insert into Products (pname, pcost) values ('Gauntlet of Lifeblood', 78);
insert into Products (pname, pcost) values ('Rod of Remedies', 76);
insert into Products (pname, pcost) values ('Bravery Monolith', 1);
insert into Products (pname, pcost) values ('Judging Canopic Jar', 120);
insert into Products (pname, pcost) values ('Anarchy Bracelet', 106);
insert into Products (pname, pcost) values ('Grave Tablet', 55);
insert into Products (pname, pcost) values ('Ark of Courage', 120);
insert into Products (pname, pcost) values ('Inscriptions of Evil', 56);
insert into Products (pname, pcost) values ('Book of Blights', 104);
insert into Products (pname, pcost) values ('Gin no Ken', 106);
insert into Products (pname, pcost) values ('Apocalypse', 43);
insert into Products (pname, pcost) values ('Treachery', 99);
insert into Products (pname, pcost) values ('Draughtbane', 136);
insert into Products (pname, pcost) values ('Spiteful Quickblade', 61);
insert into Products (pname, pcost) values ('Reforged Iron Katana', 91);

-- Inventory
insert into Inventory (uid, pid) values (1,3);
insert into Inventory (uid, pid) values (1,4);
insert into Inventory (uid, pid) values (1,6);
insert into Inventory (uid, pid) values (1,9);
insert into Inventory (uid, pid) values (1,10);
insert into Inventory (uid, pid) values (1,11);
insert into Inventory (uid, pid) values (1,20);
insert into Inventory (uid, pid) values (1,23);
insert into Inventory (uid, pid) values (1,24);
insert into Inventory (uid, pid) values (1,28);
insert into Inventory (uid, pid) values (1,30);
insert into Inventory (uid, pid) values (2,2);
insert into Inventory (uid, pid) values (2,3);
insert into Inventory (uid, pid) values (2,16);
insert into Inventory (uid, pid) values (2,18);
insert into Inventory (uid, pid) values (2,25);
insert into Inventory (uid, pid) values (2,26);
insert into Inventory (uid, pid) values (2,28);
insert into Inventory (uid, pid) values (2,30);
insert into Inventory (uid, pid) values (3,3);
insert into Inventory (uid, pid) values (3,5);
insert into Inventory (uid, pid) values (3,10);
insert into Inventory (uid, pid) values (3,11);
insert into Inventory (uid, pid) values (3,19);
insert into Inventory (uid, pid) values (3,23);
insert into Inventory (uid, pid) values (4,4);
insert into Inventory (uid, pid) values (4,10);
insert into Inventory (uid, pid) values (4,11);
insert into Inventory (uid, pid) values (4,12);
insert into Inventory (uid, pid) values (4,18);
insert into Inventory (uid, pid) values (4,19);
insert into Inventory (uid, pid) values (4,27);
insert into Inventory (uid, pid) values (5,2);
insert into Inventory (uid, pid) values (5,17);
insert into Inventory (uid, pid) values (5,18);
insert into Inventory (uid, pid) values (5,19);
insert into Inventory (uid, pid) values (5,21);
insert into Inventory (uid, pid) values (5,26);
insert into Inventory (uid, pid) values (6,4);
insert into Inventory (uid, pid) values (6,5);
insert into Inventory (uid, pid) values (6,6);
insert into Inventory (uid, pid) values (6,7);
insert into Inventory (uid, pid) values (6,10);
insert into Inventory (uid, pid) values (6,19);
insert into Inventory (uid, pid) values (6,25);
insert into Inventory (uid, pid) values (7,9);
insert into Inventory (uid, pid) values (7,14);
insert into Inventory (uid, pid) values (7,23);
insert into Inventory (uid, pid) values (7,27);
insert into Inventory (uid, pid) values (8,2);
insert into Inventory (uid, pid) values (8,12);
insert into Inventory (uid, pid) values (8,16);
insert into Inventory (uid, pid) values (9,3);
insert into Inventory (uid, pid) values (9,7);
insert into Inventory (uid, pid) values (9,11);
insert into Inventory (uid, pid) values (9,14);
insert into Inventory (uid, pid) values (9,19);
insert into Inventory (uid, pid) values (9,25);
insert into Inventory (uid, pid) values (9,27);
insert into Inventory (uid, pid) values (10,3);
insert into Inventory (uid, pid) values (10,12);
insert into Inventory (uid, pid) values (10,13);
insert into Inventory (uid, pid) values (10,15);
insert into Inventory (uid, pid) values (11,4);
insert into Inventory (uid, pid) values (11,14);
insert into Inventory (uid, pid) values (11,17);
insert into Inventory (uid, pid) values (11,19);
insert into Inventory (uid, pid) values (11,21);
insert into Inventory (uid, pid) values (11,29);
insert into Inventory (uid, pid) values (12,3);
insert into Inventory (uid, pid) values (12,4);
insert into Inventory (uid, pid) values (12,7);
insert into Inventory (uid, pid) values (12,10);
insert into Inventory (uid, pid) values (12,13);
insert into Inventory (uid, pid) values (12,21);
insert into Inventory (uid, pid) values (12,25);
insert into Inventory (uid, pid) values (12,27);
insert into Inventory (uid, pid) values (12,30);
insert into Inventory (uid, pid) values (13,7);
insert into Inventory (uid, pid) values (13,8);
insert into Inventory (uid, pid) values (13,9);
insert into Inventory (uid, pid) values (13,10);
insert into Inventory (uid, pid) values (13,11);
insert into Inventory (uid, pid) values (13,12);
insert into Inventory (uid, pid) values (13,17);
insert into Inventory (uid, pid) values (13,25);
insert into Inventory (uid, pid) values (13,29);
insert into Inventory (uid, pid) values (14,9);
insert into Inventory (uid, pid) values (14,10);
insert into Inventory (uid, pid) values (14,16);
insert into Inventory (uid, pid) values (15,4);
insert into Inventory (uid, pid) values (15,7);
insert into Inventory (uid, pid) values (15,10);
insert into Inventory (uid, pid) values (15,16);
insert into Inventory (uid, pid) values (15,19);
insert into Inventory (uid, pid) values (15,20);
insert into Inventory (uid, pid) values (15,21);
insert into Inventory (uid, pid) values (15,23);
insert into Inventory (uid, pid) values (15,24);
insert into Inventory (uid, pid) values (15,30);
insert into Inventory (uid, pid) values (16,4);
insert into Inventory (uid, pid) values (16,6);
insert into Inventory (uid, pid) values (16,12);
insert into Inventory (uid, pid) values (16,14);
insert into Inventory (uid, pid) values (16,19);
insert into Inventory (uid, pid) values (16,28);
insert into Inventory (uid, pid) values (17,3);
insert into Inventory (uid, pid) values (17,5);
insert into Inventory (uid, pid) values (17,7);
insert into Inventory (uid, pid) values (17,8);
insert into Inventory (uid, pid) values (17,10);
insert into Inventory (uid, pid) values (17,11);
insert into Inventory (uid, pid) values (17,23);
insert into Inventory (uid, pid) values (17,28);
insert into Inventory (uid, pid) values (18,2);
insert into Inventory (uid, pid) values (18,7);
insert into Inventory (uid, pid) values (18,11);
insert into Inventory (uid, pid) values (18,15);
insert into Inventory (uid, pid) values (18,17);
insert into Inventory (uid, pid) values (18,21);
insert into Inventory (uid, pid) values (18,27);
insert into Inventory (uid, pid) values (18,29);
insert into Inventory (uid, pid) values (19,12);
insert into Inventory (uid, pid) values (19,13);
insert into Inventory (uid, pid) values (19,17);
insert into Inventory (uid, pid) values (19,24);
insert into Inventory (uid, pid) values (20,3);
insert into Inventory (uid, pid) values (20,4);
insert into Inventory (uid, pid) values (20,7);
insert into Inventory (uid, pid) values (20,9);
insert into Inventory (uid, pid) values (20,22);
insert into Inventory (uid, pid) values (20,30);
insert into Inventory (uid, pid) values (21,10);
insert into Inventory (uid, pid) values (21,21);
insert into Inventory (uid, pid) values (21,22);
insert into Inventory (uid, pid) values (21,23);
insert into Inventory (uid, pid) values (21,24);
insert into Inventory (uid, pid) values (21,30);
insert into Inventory (uid, pid) values (22,4);
insert into Inventory (uid, pid) values (22,9);
insert into Inventory (uid, pid) values (23,5);
insert into Inventory (uid, pid) values (23,14);
insert into Inventory (uid, pid) values (23,19);
insert into Inventory (uid, pid) values (23,27);
insert into Inventory (uid, pid) values (24,1);
insert into Inventory (uid, pid) values (24,2);
insert into Inventory (uid, pid) values (24,3);
insert into Inventory (uid, pid) values (24,5);
insert into Inventory (uid, pid) values (24,6);
insert into Inventory (uid, pid) values (24,21);
insert into Inventory (uid, pid) values (24,28);
insert into Inventory (uid, pid) values (25,3);
insert into Inventory (uid, pid) values (25,9);
insert into Inventory (uid, pid) values (25,12);
insert into Inventory (uid, pid) values (25,14);
insert into Inventory (uid, pid) values (25,20);
insert into Inventory (uid, pid) values (25,25);
insert into Inventory (uid, pid) values (25,27);
insert into Inventory (uid, pid) values (26,11);
insert into Inventory (uid, pid) values (26,12);
insert into Inventory (uid, pid) values (26,16);
insert into Inventory (uid, pid) values (26,17);
insert into Inventory (uid, pid) values (26,20);
insert into Inventory (uid, pid) values (27,2);
insert into Inventory (uid, pid) values (27,8);
insert into Inventory (uid, pid) values (27,10);
insert into Inventory (uid, pid) values (27,15);
insert into Inventory (uid, pid) values (27,16);
insert into Inventory (uid, pid) values (27,25);
insert into Inventory (uid, pid) values (27,26);
insert into Inventory (uid, pid) values (27,30);
insert into Inventory (uid, pid) values (28,2);
insert into Inventory (uid, pid) values (28,7);
insert into Inventory (uid, pid) values (28,18);
insert into Inventory (uid, pid) values (28,26);
insert into Inventory (uid, pid) values (29,2);
insert into Inventory (uid, pid) values (29,5);
insert into Inventory (uid, pid) values (29,9);
insert into Inventory (uid, pid) values (29,17);
insert into Inventory (uid, pid) values (29,19);
insert into Inventory (uid, pid) values (29,23);
